# AI引き継ぎドキュメント #01

**作成日**: 2025-09-19
**前回からの継続**: 新規開始
**次回引き継ぎ時の指示**: 「引き継ぎドキュメント#01から継続をお願いします」

---

## 📋 必須読み込みルール

### 最重要：プロジェクト目的を絶対に見失わない
1. **CivitAI条件指定プロンプト自動収集**
2. **自動カテゴリ分け（6カテゴリ）**
3. **ComfyUI統合（WD14の表現不足を補完）**

### AI対応ルール
- READMEのルールセクションを必ず最初に確認
- フェーズ完結型実装（エラー即座修正禁止）
- 現在のフェーズ・タスクを必ず明記
- **引き継ぎドキュメントはナンバリング管理（#01→#02→#03...）**

---

## 🎯 現在の開発状況

### 完了済み（✅）
- [x] プロジェクト構造設計・作成
- [x] config.py - 設定管理・カテゴリ定義
- [x] requirements.txt - 依存関係整理
- [x] collector.py - API呼び出し・データ抽出
- [x] database.py - SQLite操作・CRUD
- [x] 新リポジトリ作成・基本ファイルプッシュ

### 実装中（🔄）
現在のフェーズ: **基本ファイル群実装**

### 未完了（❌）
- [ ] categorizer.py - プロンプト自動分類
- [ ] visualizer.py - グラフ生成・統計表示
- [ ] main.py - 実行用メインファイル
- [ ] ui/streamlit_app.py - Streamlit UI実装
- [ ] テスト実装
- [ ] 動作確認・デバッグ

---

## 📁 プロジェクト構造詳細

```
civitai-prompt-collector-v2/
├── src/
│   ├── __init__.py
│   ├── config.py         ✅ 完了
│   ├── collector.py      ✅ 完了
│   ├── database.py       ✅ 完了
│   ├── categorizer.py    ❌ 未実装
│   └── visualizer.py     ❌ 未実装
├── ui/
│   └── streamlit_app.py  ❌ 未実装
├── data/                 ✅ フォルダ作成済み
├── docs/
│   └── handover/         ✅ このファイル
├── tests/                ❌ 未実装
├── requirements.txt      ✅ 完了
├── main.py               ❌ 未実装
├── .env.example          ❌ 未作成
├── .gitignore            ❌ 未作成
└── README.md             ✅ 完了予定
```

---

## 🔧 技術的詳細・設計思想

### アーキテクチャ
- **分離設計**: 機能ごとにファイル分割
- **設定外部化**: config.pyで一元管理
- **エラーハンドリング**: 各レイヤーで適切な例外処理
- **拡張性**: 将来のComfyUI連携を考慮

### 既存コードベース
- `civitai_collector_v8.py`が動作確認済みの基準
- 既存の複雑なコードをクリーンに再構築中
- 6カテゴリ分類ロジックを継承

### データベース設計
- SQLite使用（シンプル・ポータブル）
- プロンプトテーブル + カテゴリテーブル
- UPSERT対応（重複防止）

---

## 🎯 次回最優先タスク

**Phase**: categorizer.py実装

**具体的作業内容**:
1. 既存v8のカテゴリ分類ロジックを分離
2. キーワードマッチング方式の改良
3. confidence計算の実装
4. database.pyとの連携

**完了条件**:
- プロンプトテキストを6カテゴリに自動分類
- 信頼度スコア算出
- データベース保存機能

---

## 📋 ユーザー情報・制約

### ユーザー特性
- プログラミング初心者
- VSCode使用、Windows環境
- トークン節約重視
- 説明は簡潔・分かりやすく

### 技術環境
- Python 3.13
- VSCode + 仮想環境(.venv)
- GitHub管理
- SQLite使用

---

## 🔄 前回会話からの引き継ぎ事項

### 解決済み問題
- プロジェクト構造の混乱 → 新規リポジトリで解決
- ファイルの乱立 → クリーンな設計で解決
- README vs 引き継ぎドキュメント → 分離運用で解決

### 持ち越し課題
- 実際の動作テストはまだ未実施
- UI実装は後回し
- パフォーマンス最適化は基本機能完成後

---

## 📝 次回引き継ぎドキュメント作成時の注意

1. **ナンバリング**: #02として作成
2. **前回からの継続**: #01からの継続と明記
3. **完了タスクの移動**: 完了したものは✅に移動
4. **新しい問題・発見事項**: 詳細に記録
5. **次回最優先タスク**: 具体的に指定

---

**このドキュメントを次回会話で必ずアップロードしてください**
